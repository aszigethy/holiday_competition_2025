<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Rate Your Ride in Chihuahuas</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    * {
      box-sizing: border-box;
    }

    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      width: 100%;
      overflow: hidden;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: radial-gradient(circle at top left, #ffe7c8, #ffd4d8, #f3f2ff);
    }

    .app-root {
      height: 100%;
      width: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 12px;
    }

    .card {
      width: 100%;
      max-width: 460px;
      height: 100%;
      max-height: 326px;
      background: rgba(255, 255, 255, 0.96);
      border-radius: 20px;
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.12);
      padding: 14px 18px 16px 18px;
      display: flex;
      flex-direction: column;
      position: relative;
      border: 2px solid rgba(255, 186, 120, 0.7);
      overflow: hidden;
      transition: background 160ms ease, border-color 160ms ease, box-shadow 160ms ease;
    }

    body.fiesta-on .card {
      background: linear-gradient(135deg, rgba(255, 245, 230, 0.96), rgba(255, 226, 238, 0.96));
      border-color: rgba(255, 140, 90, 0.9);
      box-shadow: 0 12px 28px rgba(255, 140, 90, 0.45);
    }

    .card-header {
      display: flex;
      flex-direction: column;
      gap: 6px;
      margin-bottom: 14px;
    }

    .header-top {
      display: flex;
      justify-content: flex-end;
      align-items: center;
      gap: 6px;
    }

    .card-title {
      font-size: 16px;
      font-weight: 700;
      color: #3b2b21;
      text-align: center;
      margin-top: 2px;
    }

    .header-right {
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .mini-icon {
      width: 18px;
      height: 18px;
      border-radius: 50%;
      background: conic-gradient(from 160deg, #ffce6a, #ff9478, #ffce6a);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 12px;
      color: #4b2b18;
      box-shadow: 0 0 0 2px rgba(255, 255, 255, 0.8);
    }

    .sombrero-pill {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      padding: 2px 8px;
      border-radius: 999px;
      background: rgba(255, 203, 140, 0.25);
      border: 1px solid rgba(255, 168, 76, 0.6);
      font-size: 10px;
      color: #6a462e;
      white-space: nowrap;
      cursor: pointer;
      transition: background 140ms ease, border-color 140ms ease, transform 80ms ease, box-shadow 140ms ease;
    }

    .sombrero-pill span {
      font-size: 12px;
    }

    .sombrero-pill.active {
      background: rgba(255, 191, 122, 0.6);
      border-color: rgba(255, 142, 71, 0.9);
      box-shadow: 0 0 0 2px rgba(255, 232, 204, 0.8);
      transform: translateY(-1px);
    }

    .card-body {
      flex: 1;
      display: flex;
      flex-direction: column;
    }

    .dogs-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 6px;
      margin-bottom: 6px;
    }

    .dog-tile {
      flex: 1;
      aspect-ratio: 1 / 1;
      border-radius: 14px;
      border: 2px solid rgba(204, 173, 154, 0.7);
      background: #fff;
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
      cursor: pointer;
      overflow: hidden;
      padding: 0;
      transition: transform 120ms ease, box-shadow 120ms ease, border-color 120ms ease, background 120ms ease;
    }

    .dog-tile:hover {
      transform: translateY(-1px);
      box-shadow: 0 6px 12px rgba(0, 0, 0, 0.12);
    }

    .dog-tile.selected {
      border-color: #ff7a5c;
      box-shadow: 0 0 0 2px rgba(255, 152, 109, 0.55);
    }

    body.fiesta-on .dog-tile {
      animation: fiesta-shake 900ms ease-in-out infinite;
      transform-origin: center bottom;
    }

    @keyframes fiesta-shake {
      0%, 100% { transform: translateY(0) rotate(0deg); }
      20% { transform: translateY(-1px) rotate(-1deg); }
      40% { transform: translateY(0) rotate(0.6deg); }
      60% { transform: translateY(-1px) rotate(1deg); }
      80% { transform: translateY(0) rotate(-0.6deg); }
    }

    .dog-image {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
    }

    .buttons-row {
      display: flex;
      justify-content: flex-end;
      gap: 8px;
      margin-top: 4px;
    }

    .btn {
      border: none;
      border-radius: 999px;
      padding: 6px 14px;
      font-size: 12px;
      cursor: pointer;
      transition: background 120ms ease, transform 80ms ease, box-shadow 120ms ease;
      display: inline-flex;
      align-items: center;
      gap: 4px;
      white-space: nowrap;
    }

    .btn:active {
      transform: translateY(1px);
      box-shadow: none;
    }

    .btn-secondary {
      background: #f3e1d4;
      color: #5d3c27;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.08);
    }

    .btn-secondary:hover {
      background: #ebd4c0;
    }

    .btn-primary {
      background: linear-gradient(135deg, #ff9a68, #ff7a5c);
      color: #3b2414;
      font-weight: 600;
      box-shadow: 0 3px 7px rgba(255, 122, 92, 0.5);
    }

    .btn-primary:hover {
      background: linear-gradient(135deg, #ffb07e, #ff8b67);
    }

    .error-text {
      font-size: 11px;
      color: #b8252d;
      margin-top: 2px;
      min-height: 14px;
      text-align: left;
    }

    /* Screen containers */

    .screen {
      display: none;
      flex: 1;
      flex-direction: column;
    }

    .screen.active {
      display: flex;
    }

    /* Rating layout centered vertically in card body */
    .rating-layout {
      flex: 1;
      display: flex;
      flex-direction: column;
      justify-content: center;
      gap: 8px;
    }

    .centered {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
      flex: 1;
      gap: 8px;
    }

    .big-dog {
      width: 120px;
      height: 120px;
      border-radius: 24px;
      overflow: hidden;
      border: 3px solid rgba(204, 145, 140, 0.9);
      background: linear-gradient(135deg, #ffe2d8, #ffc0c0);
      box-shadow: 0 8px 18px rgba(0, 0, 0, 0.18);
      display: flex;
    }

    .big-dog img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .big-title {
      font-size: 18px;
      font-weight: 800;
      color: #3b1f16;
    }

    .big-subtitle {
      font-size: 12px;
      color: #6e4730;
      max-width: 260px;
    }

    .mute-toggle {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      font-size: 11px;
      color: #6b4431;
      cursor: pointer;
      padding: 2px 8px;
      border-radius: 999px;
      background: rgba(248, 220, 200, 0.9);
      border: 1px solid rgba(210, 154, 120, 0.8);
    }

    .mute-dot {
      width: 10px;
      height: 10px;
      border-radius: 50%;
      background: #e25542;
    }

    .mute-dot.muted {
      background: #aaa;
    }

    .footer-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 4px;
    }

    .btn-group {
      display: flex;
      gap: 6px;
    }

    .btn-outline {
      border-radius: 999px;
      padding: 6px 14px;
      font-size: 12px;
      border: 1px solid #d19c84;
      background: #fff7f0;
      color: #5a331e;
      cursor: pointer;
      transition: background 120ms ease, transform 80ms ease;
      display: inline-flex;
      align-items: center;
      gap: 4px;
      white-space: nowrap;
    }

    .btn-outline:hover {
      background: #ffe5cf;
    }

    .btn-outline:active {
      transform: translateY(1px);
    }

    .btn-yes { }
    .btn-no { }

    .maracas-row {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
    }

    .maraca {
      font-size: 26px;
      filter: drop-shadow(0 2px 2px rgba(0, 0, 0, 0.18));
      display: inline-block;
      animation: fiesta-shake 900ms ease-in-out infinite;
      transform-origin: center bottom;
    }

  </style>
</head>
<body>
  <div class="app-root">
    <div class="card">
      <div class="card-header">
        <div class="header-top">
          <div class="header-right">
            <div class="sombrero-pill" id="fiesta-toggle">
              <span>ðŸŽ©</span>
              <span>Fiesta mode</span>
            </div>
            <div class="mini-icon">ðŸŽº</div>
          </div>
        </div>
        <div class="card-title">Please rate your experience in chihuahuas.</div>
      </div>

      <div class="card-body">
        <!-- Screen 1: Chihuahua rating -->
        <div class="screen active" id="screen-rating">
          <div class="rating-layout">
            <div class="dogs-row" id="dogs-row">
              <!-- Rating tiles 1 to 5 -->
              <button class="dog-tile" data-rating="1" type="button">
                <img class="dog-image" src="1.png" alt="Rating 1 chihuahua">
              </button>
              <button class="dog-tile" data-rating="2" type="button">
                <img class="dog-image" src="2.png" alt="Rating 2 chihuahuas">
              </button>
              <button class="dog-tile" data-rating="3" type="button">
                <img class="dog-image" src="3.png" alt="Rating 3 chihuahuas">
              </button>
              <button class="dog-tile" data-rating="4" type="button">
                <img class="dog-image" src="4.png" alt="Rating 4 chihuahuas">
              </button>
              <button class="dog-tile" data-rating="5" type="button">
                <img class="dog-image" src="5.png" alt="Rating 5 chihuahuas">
              </button>
            </div>

            <div class="error-text" id="error-text"></div>

            <div class="buttons-row">
              <button class="btn btn-secondary" type="button" id="btn-clear">Clear</button>
              <button class="btn btn-primary" type="button" id="btn-submit">
                Submit
              </button>
            </div>
          </div>
        </div>

        <!-- Screen 2: Angry confirmation -->
        <div class="screen" id="screen-angry">
          <div class="centered">
            <div class="big-dog">
              <img src="angry.png" alt="Very angry chihuahua">
            </div>
            <div class="big-title">Are you sure?</div>
            <div class="big-subtitle">
              That rating does not look like a five-chihuahua experience.
            </div>
          </div>
          <div class="footer-row">
            <div class="mute-toggle" id="mute-toggle">
              <div class="mute-dot" id="mute-dot"></div>
              <span id="mute-label">Sound on</span>
            </div>
            <div class="btn-group">
              <button class="btn-outline btn-yes" type="button" id="btn-yes">Yes, I'm sure</button>
              <button class="btn-outline btn-no" type="button" id="btn-no">No, take me back</button>
            </div>
          </div>
        </div>

        <!-- Screen 3: Happy thank you -->
        <div class="screen" id="screen-happy">
          <div class="centered">
            <div class="maracas-row">
              <span class="maraca">ðŸª‡</span>
              <div class="big-dog" style="border-color: rgba(155, 197, 142, 0.9); background: linear-gradient(135deg, #e9ffd5, #c6f4c3);">
                <img src="happy.png" alt="Very happy chihuahua">
              </div>
              <span class="maraca">ðŸª‡</span>
            </div>
            <div class="big-title">Thanks for your feedback!</div>
            <div class="big-subtitle">
              Enjoy the 2025 ConnX Holiday Party!
            </div>
          </div>
          <div class="footer-row">
            <span></span>
            <button class="btn-secondary btn" type="button" id="btn-rate-again">
              Rate again
            </button>
          </div>
        </div>

      </div>
    </div>
  </div>

  <!-- Growl audio -->
  <audio id="growl-audio" preload="auto">
    <source src="growl.mp3" type="audio/mpeg">
  </audio>

  <!-- Fiesta background music -->
  <audio id="music-audio" preload="auto" loop>
    <source src="music.mp3" type="audio/mpeg">
  </audio>

  <script>
    (function () {
      var selectedRating = null;
      var screenRating = document.getElementById("screen-rating");
      var screenAngry = document.getElementById("screen-angry");
      var screenHappy = document.getElementById("screen-happy");
      var errorText = document.getElementById("error-text");
      var btnClear = document.getElementById("btn-clear");
      var btnSubmit = document.getElementById("btn-submit");
      var btnYes = document.getElementById("btn-yes");
      var btnNo = document.getElementById("btn-no");
      var btnRateAgain = document.getElementById("btn-rate-again");
      var muteToggle = document.getElementById("mute-toggle");
      var muteDot = document.getElementById("mute-dot");
      var muteLabel = document.getElementById("mute-label");
      var growlAudio = document.getElementById("growl-audio");
      var musicAudio = document.getElementById("music-audio");
      var fiestaToggle = document.getElementById("fiesta-toggle");

      var isMuted = false;

      // Set volumes
      growlAudio.volume = 1.0;   // full volume
      musicAudio.volume = 0.4;   // ~40%

      function stopMusic() {
        try {
          musicAudio.pause();
          musicAudio.currentTime = 0;
        } catch (e) {}
      }

      function showScreen(screen) {
        [screenRating, screenAngry, screenHappy].forEach(function (s) {
          s.classList.remove("active");
        });
        screen.classList.add("active");
        errorText.textContent = "";

        // Any screen change stops the music
        stopMusic();
      }

      function updateSelection() {
        var tiles = document.querySelectorAll(".dog-tile");
        tiles.forEach(function (tile) {
          var rating = parseInt(tile.getAttribute("data-rating"), 10);
          if (rating === selectedRating) {
            tile.classList.add("selected");
          } else {
            tile.classList.remove("selected");
          }
        });
      }

      // Tile click handlers
      document.getElementById("dogs-row").addEventListener("click", function (e) {
        var tile = e.target.closest(".dog-tile");
        if (!tile) return;
        selectedRating = parseInt(tile.getAttribute("data-rating"), 10);
        updateSelection();
        errorText.textContent = "";
      });

      btnClear.addEventListener("click", function () {
        selectedRating = null;
        updateSelection();
        errorText.textContent = "";
      });

      btnSubmit.addEventListener("click", function () {
        if (!selectedRating) {
          errorText.textContent = "Please select a chihuahua rating first.";
          return;
        }
        if (selectedRating === 5) {
          showScreen(screenHappy);
        } else {
          showScreen(screenAngry);
        }
      });

      // Angry screen buttons â€“ hover growl
      btnYes.addEventListener("mouseenter", function () {
        if (isMuted) return;
        try {
          growlAudio.currentTime = 0;
        } catch (e) {}
        growlAudio.play().catch(function () {
          // Ignore autoplay restrictions
        });
      });

      btnYes.addEventListener("mouseleave", function () {
        try {
          growlAudio.pause();
          growlAudio.currentTime = 0;
        } catch (e) {}
      });

      btnNo.addEventListener("click", function () {
        showScreen(screenRating);
      });

      // Happy screen "rate again"
      btnRateAgain.addEventListener("click", function () {
        selectedRating = null;
        updateSelection();
        showScreen(screenRating);
      });

      // Mute toggle â€“ affects growl only
      muteToggle.addEventListener("click", function () {
        isMuted = !isMuted;
        muteDot.classList.toggle("muted", isMuted);
        muteLabel.textContent = isMuted ? "Sound off" : "Sound on";

        if (isMuted) {
          try {
            growlAudio.pause();
            growlAudio.currentTime = 0;
          } catch (e) {}
        }
      });

      // Fiesta mode toggle â€“ affects visuals and music (not mute)
      fiestaToggle.addEventListener("click", function () {
        fiestaToggle.classList.toggle("active");
        var nowOn = fiestaToggle.classList.contains("active");
        document.body.classList.toggle("fiesta-on", nowOn);

        if (nowOn) {
          musicAudio.play().catch(function () {});
        } else {
          stopMusic();
        }
      });

    })();
  </script>
</body>
</html>
